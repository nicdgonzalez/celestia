# 2025-09-19

ðŸ‘‰ Building a Minecraft Dashboard from Scratch\
ðŸ“… Day 2

## TLDR

Today we:

- Added callback routes for the Minecraft server to send messages to, and
- Created a minimal working Minecraft plugin and connected it to the Dashboard
  to switch between online and offline automatically.

Tomorrow, we need to:

- Make the status of the Minecraft server persistent so we can properly set
  initial values on the frontend,
- Make the dashboard a little bit prettier!

## Plan

Today, I want to:

- Think more carefully about the Rust API,
- Think more about linking the Dashboard to the Minecraft server,
- Querying the backend from the frontend to get more accurate initial values
  (e.g., if the server is on, the UI should display it as so. Currently, the UI
  displays Offline until the `SERVER_STATUS_UPDATE` event is received, so if
  the server was already on before we started the dashboard, it would remain
  offline until the next time it turns on).
- Create a minimal Minecraft plugin that triggers the `SERVER_STATUS_UPDATE`
  event.

## Development

### API

#### Callback

- `POST /callback/status`: Update the server's status to online or offline.

| Field | Type | Description |
| :- | :- | :- |
| status | string | Whether the server is currently online or offline. |
| started_at | ?integer | A timestamp indicating when the server was started, or `null` if it is offline. |

- `POST /callback/player_joined`: A player joined the Minecraft server.

| Field | Type | Description |
| :- | :- | :- |
| status | string | Whether the server is currently online or offline. |
| started_at | ?integer | A timestamp indicating when the server was started, or `null` if it is offline. |

- `POST /callback/player_left`: A player left the Minecraft server.

#### Server

- `GET /api/status`: Whether the server is currently online or offline.

| Field | Type | Description |
| :- | :- | :- |
| status | string | Whether the server is currently online or offline. |
| started_at | ?integer | A timestamp indicating when the server was started, or `null` if it is offline. |

##### Example Response

```json
{
  "status": "online",
  "started_at": 0
}
```

#### Players

- `GET /api/server/players`: Get a list of all players that have ever joined
  the server.

##### Example Response

```json
[
  {
    "uuid": "...",
    "username": "player0702",
    "total_connects": 12,
    "is_online": false,
    "updated_at": 0  // If offline: represents last quit, if online: represents how long they have been online for.
  }
]
```

I don't have as much time to work on this today, so we'll keep the planning
short. (Note: Do I want to prioritize consistency, or do I want to prioritize
quality...? Let's start with consistency first, since quality can easily get
subjective...)
